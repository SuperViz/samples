/*! For license information please see 937.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[937],{79307:(e,t,s)=>{s.d(t,{$:()=>r});var i=s(12529),a=s(67971),o=s(99623);class r{constructor(e,t={}){this.makeLabel=()=>{const e=new o.b6(Object.assign({},this.textStyle));return e.scaleType=a.N3.WORLD,e.setRenderOrder(i.z.labels),e.setRenderLayer(this.layer),e.opacity=0,e},this.textStyle=a.uc.makeConfig(Object.assign({color:"white",background:!e,backgroundAsCollider:!0,backgroundColliderType:o.Es,backgroundColor:"#222",backgroundOpacity:1,outline:e,outlineWidth:.06,wordWrapWidth:void 0,disableDepth:!0},t))}setRenderLayer(e){this.layer=e}}},99623:(e,t,s)=>{s.d(t,{BV:()=>o,Es:()=>n,b6:()=>r});var i=s(67971),a=s(81396);const o={ColorDefault:16777215,ColorHovered:s(15462).I.MP_BRAND.getHex(),ColorInvalid:16750933};class r extends i.$7{use(e){this.userData.sid=e.data.sid,this.collider.data=e.data,this.collider.name=e.data.text,this.collider.labelMesh=e}}class n extends a.Mesh{constructor(){super(...arguments),this.hitTest=(()=>{const e=new a.Matrix4,t=new a.Ray,s=new a.Plane(new a.Vector3(0,0,-1)),i=new a.Vector3;return(a,o)=>{if(e.copy(this.matrixWorld).invert(),t.copy(a.ray).applyMatrix4(e),t.intersectPlane(s,i)){const e=this.scale.x/this.scale.y;let t=.5;e<1.5&&(t=1/e),Math.abs(i.x)<=t&&Math.abs(i.y)<=.75&&(i.applyMatrix4(this.matrixWorld),o.push({distance:a.ray.origin.distanceTo(i),point:i.clone(),object:this}))}}})()}labelVisible(){return!(!this.labelMesh||!this.labelMesh.labelVisible())}getId(){if(!this.data)throw new Error("LabelInputCollider used before configure");return this.data.sid}raycast(e,t){if(!this.labelVisible())return;if(this.material.depthTest)return void this.hitTest(e,t);const s=this.material.depthTest?t:[];this.hitTest(e,s),s.length>0&&(s[0].distance/=1e4,t.push(s[0]))}}},96139:(e,t,s)=>{s.d(t,{R:()=>a,_:()=>i});const i=30,a={LABEL_SIZE:0,FADE_DURATION:200}},72119:(e,t,s)=>{s.d(t,{E0:()=>r,Hn:()=>h,NZ:()=>o,Oq:()=>d,Ql:()=>g,X7:()=>l,ox:()=>n,xh:()=>c,yV:()=>a});var i=s(83402);const a=.01,o=.001,r=!0,n={highResThreshold:1081,desktopSize:192,desktopSizeHighRes:320,mobileSize:128},l={smoothness:.4,perspective:{fov:40,thresholdClose:1,thresholdFar:8,offsetClose:.25,offsetFar:.5,scale:1},ortho:{fov:5,thresholdClose:5,thresholdFar:20,offsetClose:15,offsetFar:30,scale:4}},c={desktop:i.l1.Edges,floorplan:i.l1.Axes,mobile:i.l1.Edges,alt:i.l1.Free,shift:i.l1.PlanarAxes,shiftAlt:i.l1.EdgesAndPlanarAxes,disabled:i.l1.Free},d={mobile:.15,desktop:.1},h={SCALE:.1,SCALE_NDC:.5,SCALE_ASPECT:.035,SCALE_DISTANCE:.025},g="measurements"},56163:(e,t,s)=>{s.d(t,{K:()=>n});var i=s(52528),a=s(71166),o=s(63319);const r=new i.v({});class n{constructor(e,t,s){this.commandBinder=e,this.layersData=t,this.dataTypeGroup=s,this.textParser=r,this.enabled=!0,this.bindings=[]}getGroupingId(e){switch(e){case o.HH.TYPE:return this.getTypeId();case o.HH.FLOOR:return this.getFloorId();case o.HH.ROOM:return this.getRoomId();case o.HH.LAYER:return this.getLayerGroupId();case o.HH.DATE:return this.dateBucket}}getFloorId(){return this.floorId}getRoomId(){return this.roomId}getDateBucket(){return this.dateBucket}getTypeId(){return this.typeId}supportsBatchDelete(){return!1}supportsLayeredCopyMove(){return!1}getLayerGroupId(){var e,t;const s=null===(e=this.layersData)||void 0===e?void 0:e.getBaseLayerId(),i=null===(t=this.layersData)||void 0===t?void 0:t.getViewLayerId();return this.layerId&&i&&this.layerId===s?i:this.layerId}isLayerVisible(){return!this.layersData||!this.layerId||this.layersData.layerVisible(this.layerId)}onSelect(e,t,s){this.commandBinder.issueCommand(new a.IL(this.id,this.typeId))}registerBindings(){}cancelBindings(){this.bindings.forEach((e=>e.cancel()))}}},83402:(e,t,s)=>{s.d(t,{l1:()=>r,r2:()=>c});var i=s(81396),a=s(69505),o=s(90304);var r;!function(e){e[e.Axes=1]="Axes",e[e.PlanarAxes=2]="PlanarAxes",e[e.EdgesAndPlanarAxes=3]="EdgesAndPlanarAxes",e[e.Edges=4]="Edges",e[e.Free=5]="Free",e[e.Locked=6]="Locked"}(r||(r={}));const n={[o.eD.UP]:{dir:Object.freeze(o.fU.UP.clone())},[o.eD.DOWN]:{dir:Object.freeze(o.fU.DOWN.clone())},[o.eD.BACK]:{dir:Object.freeze(o.fU.BACK.clone())},[o.eD.LEFT]:{dir:Object.freeze(o.fU.LEFT.clone())},[o.eD.RIGHT]:{dir:Object.freeze(o.fU.RIGHT.clone())},[o.eD.FORWARD]:{dir:Object.freeze(o.fU.FORWARD.clone())}},l={[o.eD.HORIZONTAL_PLANE]:{dir:Object.freeze(o.fU.HORIZONTAL_PLANE.clone())}},c=(()=>{let e=0;const t=new i.Vector3,s=new i.Vector3,c=new i.Vector3,d=new i.Vector3,h=999,g=Object.freeze(o.fU.ZERO.clone()),u=Object.keys(n).map((e=>Object.assign(Object.assign({},n[e]),{name:e,angleTo:h}))),b=Object.keys(l).map((e=>Object.assign(Object.assign({},l[e]),{name:e,angleTo:h}))),p=e=>(e+3)%2;let f=u[0];return(i,n,l=r.Axes)=>{if(l===r.Free)return{position:n.clone(),constrainedAxis:g,axisName:o.eD.NONE};if(u.forEach((e=>e.angleTo=h)),b.forEach((e=>e.angleTo=h)),c.copy(n).sub(i),e=c.length(),e<.05)return{position:n.clone(),constrainedAxis:g,axisName:o.eD.NONE};d.copy(c).normalize();const y=.05*Math.min(e,1);if(l!==r.Locked){for(const e of u){const t=(0,a.ZY)(d.angleTo(e.dir));t<f.angleTo&&(f=e),e.angleTo=t}if(f.angleTo>20){const e=Math.abs(c.y);e*e<y&&(f=b[0])}}t.set(i.x*p(f.dir.x),i.y*p(f.dir.y),i.z*p(f.dir.z)),s.set(n.x*Math.abs(f.dir.x),n.y*Math.abs(f.dir.y),n.z*Math.abs(f.dir.z)).add(t);return l===r.Locked||s.distanceToSquared(n)<y?{position:s.clone(),constrainedAxis:f.dir,axisName:f.name}:{position:n.clone(),constrainedAxis:g,axisName:o.eD.NONE}}})()},67971:(e,t,s)=>{s.d(t,{$7:()=>d,uc:()=>g,N3:()=>c});var i=s(81396),a=s(4679),o=s(59370),r=s(69505),n=s(49827),l=s(67944);var c;(0,a.Dy)({unicodeFontsURL:"https://static.matterport.com/webgl-vendors/unicode-font-resolver/1.0.1/"}),function(e){e.WORLD="world",e.NDC="ndc"}(c||(c={}));class d extends i.Object3D{constructor(e,t=c.WORLD){var s,o,r,n;super(),this.config=e,this.scaleType=t,this.unscaledWidth=0,this.unscaledHeight=0,this.labelTextMaterial=new i.MeshBasicMaterial,this.bindings=[];const l=this.config.background||this.config.backgroundAsCollider;if(l){this.config.backgroundOpacity=void 0!==this.config.backgroundOpacity?this.config.backgroundOpacity:1,this.config.backgroundOpacity=this.config.background?this.config.backgroundOpacity:0;const t=new i.BoxGeometry(1,1,.01),s=new i.MeshBasicMaterial({color:e.backgroundColor,transparent:!0,depthTest:this.config.backgroundOpacity>0&&!e.disableDepth,depthWrite:this.config.backgroundOpacity>0&&!e.disableDepth,opacity:this.config.backgroundOpacity,stencilRef:1,stencilFail:i.KeepStencilOp,stencilZFail:i.KeepStencilOp,stencilZPass:i.ReplaceStencilOp,stencilFunc:i.AlwaysStencilFunc,stencilWrite:!0});this.labelBackgroundMesh=new this.config.backgroundColliderType(t,s),this.labelBackgroundMesh.position.z=-.01,this.labelBackgroundMesh.name="Label Background",this.collider=this.labelBackgroundMesh,this.add(this.labelBackgroundMesh)}const d=this.labelTextMesh=new a.xv;d.material=this.labelTextMaterial,d.name="Label Text",d.text=e.text||"",d.renderOrder=10,d.font=`${null!==(s=e.assetBasePath)&&void 0!==s?s:""}${e.fontPath}`,d.lang=e.lang,d.fontSize=1,d.fontWeight=700,d.anchorX="50%",d.anchorY="50%",d.outlineWidth=e.outline?e.outlineWidth:0,d.maxWidth=e.wordWrapWidth,d.textAlign=e.align,l&&(d.raycast=()=>{}),d.addEventListener("synccomplete",(()=>{var e;const[t,s,i,a]=d.textRenderInfo.visibleBounds;let o=i-t,r=a-s;l&&(o+=this.config.backgroundBorderWidth,r+=this.config.backgroundBorderHeight,this.labelBackgroundMesh.scale.set(o,r,1)),this.unscaledWidth=o,this.unscaledHeight=r,this.aspect=o/Math.max(r,.001),d.position.set((t+i)/-2,(s+a)/-2,0),null===(e=this._onGeomUpdate)||void 0===e||e.call(this)})),this.scaleFactor=null!==(o=e.scale)&&void 0!==o?o:1,this.opacity=null!==(r=e.opacity)&&void 0!==r?r:1,this.setColor(null!==(n=e.color)&&void 0!==n?n:0),this.add(d),d.sync(),this.name="Label Container"}dispose(){this.bindings.forEach((e=>e.cancel())),this.labelTextMesh.dispose()}onGeomUpdate(e){this._onGeomUpdate=e}get text(){return this.config.text}set text(e){this.labelTextMesh.text=e,this.labelTextMesh.sync()}get mesh(){return this.labelTextMesh}getUnscaledSize(){return{width:this.unscaledWidth,height:this.unscaledHeight}}get scaleFactor(){return this.config.scale}set scaleFactor(e){this.config.scale=e,this.scale.setScalar(e)}get opacity(){return void 0!==this.config.opacity?this.config.opacity:1}set opacity(e){if(e!==this.config.opacity){this.config.opacity=e;const t=e>0&&!this.config.disableDepth;if(this.config.background){const s=this.labelBackgroundMesh.material;s.opacity=Math.min(this.config.backgroundOpacity||1,e),s.depthWrite=e>.15,s.depthTest=t}const s=this.labelTextMaterial;s.opacity=e,s.depthTest=t,this.visible=e>0}}setColor(e){this.labelTextMaterial.color.set(e)}setRenderLayer(e){this.labelTextMesh.layers.mask=e.mask,this.labelBackgroundMesh&&(this.labelBackgroundMesh.layers.mask=e.mask)}setRenderOrder(e){this.renderOrder=e,this.labelTextMesh.renderOrder=e,this.labelBackgroundMesh&&(this.labelBackgroundMesh.renderOrder=e)}setPosition(e,t=(e=>e)){this.position.copy(t(e))}setOrientation(e,t=0){this.quaternion.copy(e),0!==t&&this.rotateZ(-t*r.Ue)}scaleBillboard(e,t,s,i,a,r,d=h.SCALE_DEFAULT){if(0!==s.elements[15])this.scaleFactor=.2*d*i*(h.ORTHO_IDEAL_HEIGHT/a);else{const g=(0,o.D_)(this.position,e,t,s.asThreeMatrix4()),u=Math.abs(g.x);if(u<1){const t=(0,l.mY)(s,e,this.position,a,d),o=((0,n.uZ)(r,1,2.5)+i)*h.SCALE_ASPECT,g=1+h.SCALE_NDC-u*h.SCALE_NDC-o,b=Math.max(Math.min(1/t*g,3),.001);this.scaleType===c.NDC?this.scaleFactor=b:this.scaleFactor=Math.min(b*h.NDC_MULT,d*h.SCALE_WORLD)}else this.scaleFactor=.001}}}const h={SCALE_DEFAULT:.1,SCALE_WORLD:4,SCALE_NDC:.5,SCALE_ASPECT:.035,DEPTH_WRITE_THRESHOD:.15,ORTHO_IDEAL_HEIGHT:1500,NDC_MULT:1.15};class g{constructor(e){this.currentTextConfig=g.defaultTextConfig,e?this.updateTextStyle(e):this.updateTextStyle(g.defaultTextConfig)}updateTextStyle(e){this.currentTextConfig=Object.assign(Object.assign({},this.currentTextConfig),e)}createLabel(e={text:""}){return new d(Object.assign(Object.assign({},this.currentTextConfig),e))}static makeConfig(e){return Object.assign(Object.assign({},g.defaultTextConfig),e)}}g.defaultTextConfig={text:"",fontPath:"fonts/roboto-700.woff",align:"center",wordWrapWidth:void 0,color:"black",backgroundColor:"white",backgroundBorderWidth:.9,backgroundBorderHeight:.7,background:!0,backgroundAsCollider:!0,backgroundColliderType:i.Mesh,scale:1,outline:!1,outlineWidth:.06}}}]);